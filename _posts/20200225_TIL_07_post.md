<!DOCTYPE html>
<html  lang="en">
    <head>
        <meta charset="UTF-8">
        <title>[20200225_TIL_07]</title>
    </head>
    <body>
        <h1>7. 세션 공격</h1>
        <ul>
            <li>대부분의 웹 애플리케이션은 세션을 통해 사용자의 요청을 구별, 처리한다.</li>
            <li>공격자가 세션관리를 뚫을 수 있으면 다른 사용자의 권한을 획득할 수 있음</li>
            <li>대부분의 취약점은 공격자가 애플리케이션으로부터 제공받은 고유 토큰의 값을 증가해서 다른 사용자의 권한을 얻을 수 있는 경우임</li>
            <li>이 장에서는 세션 관리에 대한 취약범과 세션 관리 취약점을 찾기 위한 일반적인 단계, 예방 방법에 대해 설명</li>
            <div>
                <h2>1. 사용자의 상태에 대한 유지 필요</h2>
                <ul>
                    <li>http 프로토콜은상태 정보를 지속적으로 가지고 있지 않음</li>
                    <li>htp 프로토콜은 사용자가 웹 애플리케이션에 특정 자원을 요청할 때 개별 사용자에게 요청에 대한 응답을 제공할 메커니즘을 가지고 있지 않음</li>
                    <li>웹 애플리케이션은 세션이라는 개념을 통해 이와 같이 개별적으로 사용자를 구분할 수 있음</li>
                    <li>세션이 사용되는 흔한 예는 로그인 부분임</li>
                    <li>일반적으로 각 사용자에게 유일한 세션 토큰이나 식별자를 부여해서 세션을 생성한다.</li>
                    <li>대부분 쿠키를 사용해서 서버와 클라이언트 간에 세션 토큰을 주고 받는다.</li>
                    <li>
                        <p>세션관리 매커니즘 취약점</p>
                        <ol>
                            <li>세션 토큰을 만드는 과정에서 발생하는 취약점</li>
                            <li>세션 토큰을 처리할 때 발생하는 취약점</li>
                        </ol>
                    </li>
                    <li>애플리케이션은 쿠키, URL, 매개변수, 히든 필드 등 수많은 항목의 데이터를 토큰으로 사용할 수 있다.</li>
                    <div>
                        <h3>1_1. 세션 대안</h3>
                        <ol>
                            <li>
                                <b>http 인증</b>
                                <ul>
                                    <li>애플리케이션은 다양한 HTTP 기반의 인증 기법을 통해 세션을 사용하지 않을 수 있음</li>
                                    <li>http Basic: 기본 액세스 인증, http 사용자가 에이전트 요청시 사용자 이름과 비밀번호를 제공하는 방법</li>
                                    <li>http digest: 웹 서버가 사용자의 웹 브라우저와 사용자 이름 또는 암호와 같은 자격 증명을 협상하는 데 사용할 수 있는 합의된 방법</li>
                                </ul>
                            </li>
                            <li>
                                <b>비세션(Sessionless) 상태 메커니즘</b>
                                <ul>
                                    <li>일부 애플리케이션은 쿠키나 보이지 않는 형식으로 클라이언트에게 상태를 관리하기 위한 데이터를 보낸다.</li>
                                    <li>이렇게 함으로써 이 메커니즘은 ASP.NET Viewstate와 비슷한 비세션 상태를 사용할 수 있게 된다.</li>
                                    <li>안전하게 상태 정보를 전달하기 위해 보통 바이너리를 만들어서 모든 상태 정보를 담고, 만들어진 바이너리를 암호화하거나 서명해서 사용</li>
                                </ul>
                            </li>
                        </ol>
                        <ul>
                            <li><p>http 인증을 사용하고 있는 애플리케이션이 있다면 세션 관리 메커니즘이 사용되지 않았을 가능성이 높다.</p></li>
                            <li><p>애플리케이션이 상태를 관리하는 데 세션 토큰을 사용하지 않으면 7장에서 소개하는 어떤 공격도 소용 없을 수 있다.</p></li>
                        </ul>
                    </div>
                </ul>
            </div>
            <div>
                <h2>2. 세션 토큰을 만드는 과정에서 발생하는 취약점</h2>
                <ul>
                    <div>
                        <h3>2_1. 중요한 토큰</h3>
                        <ul>
                            <li>세션 토큰은 사용자명이나 이메일 주소를 변경해서 만들어지기도 하고, 그 외의 다른 정보를 이용해서 만들어지기도 함</li>
                            <li>공격자를 디코딩해 이해하기 쉽게 만들어진 세션 토큰에서 원하는 내용을 바꿔서 다른 사용자의 세션을 알 수도 있다.</li>
                            <li>세션 토큰을 때로 중요한 데이터를 포함하고 있는 컴포넌트를 가지로 있는 경우도 있다.
                                <ul>
                                    <li>사용자 계정</li>
                                    <li>사용자 실명</li>
                                    <li>이메일 주소</li>
                                </ul>
                            </li>
                            <li>일반적으로 사용하는 인코딩 스키마는 XOR, Base64, 아스키 문자열을 사용한 16진법 등이 있다.</li>
                            <li>토큰을 작은 부분으로 나눠서 분석하면 토큰이 가지고 있는 복잡한 부분을 좀 더 쉽게 이해 할 수 있을 것이다.</li>
                            <li>애플리케이션의 세션을 필요로 하는 페이지(사용자 정보 페이지 등)에서 유효하지 않는 세션에 대한 에러메시지를 통해 유요한 세션을 찾을 수 있다.</li>
                        </ul>
                        <h3>2_2. 추측 가능한 토큰</h3>
                        <ul>
                            <li></li>
                        </ul>
                    </div>
                </ul>
            </div>
        </ul>
    </body>
</html>